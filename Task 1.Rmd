---
title: "Practice Task 1"
author: "Richard"
date: "2023-03-20"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r Problem 1}
# required packages
# library(readr)
# library(tidyr)
# library(dplyr)

pacman::p_load(dplyr,readr,tidyr,readxl)

# dt <- readxl::read_excel("refine_original_toy_data.xlsx")[1]
# dt <- dt[,1] %>%
# separate(sep = ",")

dt <- read_csv("refine_original_toy_data_csv.csv")
# unique(dt$)
```


```{r Problem 2}
dt <- dt %>%
    mutate(company = ifelse(grepl("^phil|^fil|^phl", company,
        ignore.case = TRUE), "philips", company)) %>%
    mutate(company = ifelse(grepl("^ak", company, ignore.case = TRUE),
        "akzo", company)) %>%
    mutate(company = ifelse(grepl("^van", company, ignore.case = TRUE),
        "van_houten", company)) %>%
    mutate(company = ifelse(grepl("^uni", company, ignore.case = TRUE),
        "unilever", company))
```

```{r Problem 3}
dt <- dt %>%
    separate(`Product code / number`, into = c("product_code",
        "Product_number"), sep = "-")
```

```{r Problem 4}
dt <- dt %>%
    mutate(product_category = ifelse(product_code == "p", "Smartphone",
        "")) %>%
    mutate(product_category = ifelse(product_code == "x", "Laptop",
        product_category)) %>%
    mutate(product_category = ifelse(product_code == "v", "TV",
        product_category)) %>%
    mutate(product_category = ifelse(product_code == "q", "Tablet",
        product_category))
```

```{r Problem 5}
dt <- dt %>%
    unite(full_address, c(address, city, country), sep = ",")
```

```{r Problem 6}
dt <- dt %>%
    mutate(company_philips = ifelse(company == "philips", 1,
        0)) %>%
    mutate(company_akzo = ifelse(company == "akzo", 1, 0)) %>%
    mutate(company_van_houten = ifelse(company == "van_houten",
        1, 0)) %>%
    mutate(company_unilever = ifelse(company == "unilever", 1,
        0))
```

```{r Problem 7}
dt <- dt %>%
    mutate(product_smartphone = ifelse(product_category == "Smartphone",
        1, 0)) %>%
    mutate(product_TV = ifelse(product_category == "TV", 1, 0)) %>%
    mutate(product_laptop = ifelse(product_category == "Laptop",
        1, 0)) %>%
    mutate(product_tablet = ifelse(product_category == "Tablet",
        1, 0))
```

```{r Working with Data}
# install th read r package
# install.packages(readr)
# load the read r package
library(readr)
# read csv file using read.table()
df1 <- read_csv("demo csv data.csv", show_col_types = FALSE)
# df1 <- read_csv("data/demo csv data.csv", show_col_types = FALSE)
# read txt file that doesnot headers
library(dplyr)
df2 <- read_delim("demo data text.txt")
# df2 <- read_delim("data/demo data text.txt")
# Or use
df3 <- read_tsv("demo data text.txt") 
View(df3)

# df3 <- read_tsv("data/demo data text.txt")

# utils:: Package

#Importing an Excel file
# install package
install.packages("readxl")
# load package
library(readxl)
# by default, it loads the first sheet
excel_data <- read_excel("demo excel data.xlsx") 
View(excel_data)
# excel_data <- read_excel("data/demo excel data.xlsx")
# if the excell workbook has many sheets and you want to
# load a specific one, e,g, sheet two
excel_data <- read_excel("demo excel data.xlsx", sheet = 2)

#Importing a Stata file
install.packages("readstata13")
library(readstata13)
stata_data <- read.dta13("demo stata data.dta", generate.factors = TRUE)
View(stata_data)
# stata_data <- read.dta13("data/demo stata data.dta", generate.factors = TRUE)

#Importing an R data file
load("demo R data.rda")

#Inbuilt Data sets
# Loading
data(mtcars)
# learn more about the data
`?`(mtcars)
# OR
help(mtcars)
# list available datasets in ggplot2 package
pacman::p_load(ggplot2)
data(package = "ggplot2")

# For a better visual display of the results, additional packages can be used such as skimr, gtsummary, kable, 
install.packages("skimr")
library(skimr)
# get the summary of all the variable, alternative to str()
View(iris)
skim(iris)

sales_report <- readr::read_csv("sales_data.csv")
sales_report

skim(sales_report)

write.csv(sales_report, file = "C:/Users/RichardLubega/Downloads/R Project/Exported Files/my_data.csv")  # exporting csv data file

```

```{r Task 1}
summary(sales_report)

# Load a new data file named “customer_data.xlsx” into RStudio.
excel_file <- readxl::read_xlsx("demo excel data.xlsx")
skim(excel_file)

head(excel_file, n=13)
?tibble
tail(excel_file)

str(excel_file)

summary(excel_file)

pacman::p_load(writexl)
writexl::write_xlsx(excel_file, file ="C:/Users/RichardLubega/Downloads/R Projects/Exported Files/my_data.xlsx")
writexl::write_xlsx(excel_file, file ="my_data.xlsx")

# writexl::write_xlsx(data_object, file = "my_data.rda") #exporting excel data file
```   
```{r Task 2}
data(iris)
?iris
flower_data <- iris
# Using the “plot” function, create a scatter plot of the “Sepal.Length” and “Sepal.Width” columns in the “iris” object.
plot(flower_data$Sepal.Length,flower_data$Sepal.Width)

# Using the “boxplot” function, create a box plot of the “Petal.Length” column in the “iris” object, grouped by the “Species” column.
boxplot(flower_data$Petal.Length,flower_data$Species)
?boxplot

# Using the “hist” function, create a histogram of the “Petal.Width” column in the “iris” object, grouped by the “Species” column.
hist(x= flower_data$Petal.Width, y=flower_data$Species)

# Using the “plot” function, create a line plot of the “Sepal.Length” column in the “iris” object, grouped by the “Species” column.


```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

